{"ast":null,"code":"var _jsxFileName = \"/Users/meghana/Desktop/social-login-app/src/components/ListingPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { fetchCart } from \"../components/api/CartApi\";\n\n// ...styles and utility functions (unchanged)...\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ListingPage = () => {\n  _s();\n  const [cart, setCart] = useState([]);\n  const [cartDrawerOpen, setCartDrawerOpen] = useState(false);\n  const [listings, setListings] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const location = useLocation();\n  const history = useHistory();\n\n  // Responsive state for grid\n  const [responsiveStyle, setResponsiveStyle] = useState(getResponsiveCardContainerStyle());\n  useEffect(() => {\n    function handleResize() {\n      setResponsiveStyle(getResponsiveCardContainerStyle());\n    }\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  // --- Refetch products by category ---\n  const fetchProducts = useCallback(() => {\n    const params = new URLSearchParams(location.search);\n    const category = params.get(\"category\");\n    if (category) {\n      fetch(`http://localhost:9090/lighting/api/products/by-category/${encodeURIComponent(category)}`, {\n        headers: {\n          Accept: \"application/json\"\n        }\n      }).then(res => res.json()).then(data => setListings(data)).catch(() => setListings([]));\n    } else {\n      setListings([]);\n    }\n  }, [location.search]);\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n\n  // --- Fetch cart on mount ---\n  useEffect(() => {\n    async function loadCart() {\n      const data = await fetchCart();\n      setCart((Array.isArray(data) ? data : []).map(item => ({\n        ...item,\n        id: item.lineId,\n        name: item.productName,\n        qty: item.quantity,\n        price: item.unitPrice\n      })));\n    }\n    loadCart();\n  }, []);\n\n  // Search logic\n  const filteredListings = listings.filter(item => [item.name, item.description1, item.productTypeHeading, item.orderCode, !isNaN(Number(item.discountedPrice)) && Number(item.discountedPrice) > 0 ? item.discountedPrice : item.price].filter(Boolean).join(\" \").toLowerCase().includes(search.toLowerCase()));\n  function handleCheckout() {\n    history.push(\"/customer-details\", {\n      cart\n    });\n  }\n  const getCartTotal = () => cart.reduce((sum, item) => sum + getDisplayPrice(item) * item.qty, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"24px\",\n      fontFamily: \"'Poppins', 'Inter', Arial, sans-serif\",\n      minHeight: \"100vh\",\n      background: \"#fafbfc\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(ListingPage, \"iceb5H9Ym7dzLHV84bqYLbDLsKA=\", false, function () {\n  return [useLocation, useHistory];\n});\n_c = ListingPage;\nexport default ListingPage;\nfunction getDisplayPrice(item) {\n  const discounted = Number(item.discountedPrice);\n  if (!isNaN(discounted) && discounted > 0) {\n    return discounted;\n  }\n  return Number(item.price);\n}\nfunction getResponsiveCardContainerStyle() {\n  const width = window.innerWidth;\n  if (width >= 1200) {\n    return {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(4, 1fr)\",\n      gap: \"32px\",\n      width: \"100%\",\n      maxWidth: 1440,\n      margin: \"0 auto\"\n    };\n  } else if (width >= 900) {\n    return {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(3, 1fr)\",\n      gap: \"28px\",\n      width: \"100%\",\n      maxWidth: 1100,\n      margin: \"0 auto\"\n    };\n  } else if (width >= 600) {\n    return {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(2, 1fr)\",\n      gap: \"20px\",\n      width: \"100%\",\n      maxWidth: 700,\n      margin: \"0 auto\"\n    };\n  } else {\n    return {\n      display: \"flex\",\n      flexDirection: \"column\",\n      gap: \"16px\",\n      width: \"100%\",\n      maxWidth: 400,\n      margin: \"0 auto\"\n    };\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"ListingPage\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useHistory","useLocation","fetchCart","jsxDEV","_jsxDEV","ListingPage","_s","cart","setCart","cartDrawerOpen","setCartDrawerOpen","listings","setListings","search","setSearch","location","history","responsiveStyle","setResponsiveStyle","getResponsiveCardContainerStyle","handleResize","window","addEventListener","removeEventListener","fetchProducts","params","URLSearchParams","category","get","fetch","encodeURIComponent","headers","Accept","then","res","json","data","catch","loadCart","Array","isArray","map","item","id","lineId","name","productName","qty","quantity","price","unitPrice","filteredListings","filter","description1","productTypeHeading","orderCode","isNaN","Number","discountedPrice","Boolean","join","toLowerCase","includes","handleCheckout","push","getCartTotal","reduce","sum","getDisplayPrice","style","padding","fontFamily","minHeight","background","display","flexDirection","alignItems","fileName","_jsxFileName","lineNumber","columnNumber","_c","discounted","width","innerWidth","gridTemplateColumns","gap","maxWidth","margin","$RefreshReg$"],"sources":["/Users/meghana/Desktop/social-login-app/src/components/ListingPage.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { fetchCart, addToCart, updateCartItem, removeCartItem } from \"../components/api/CartApi\";\n\n// ...styles and utility functions (unchanged)...\n\nconst ListingPage: React.FC = () => {\n  const [cart, setCart] = useState<any[]>([]);\n  const [cartDrawerOpen, setCartDrawerOpen] = useState(false);\n  const [listings, setListings] = useState<any[]>([]);\n  const [search, setSearch] = useState<string>(\"\");\n\n  const location = useLocation();\n  const history = useHistory();\n\n  // Responsive state for grid\n  const [responsiveStyle, setResponsiveStyle] = useState(getResponsiveCardContainerStyle());\n\n  useEffect(() => {\n    function handleResize() {\n      setResponsiveStyle(getResponsiveCardContainerStyle());\n    }\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  // --- Refetch products by category ---\n  const fetchProducts = useCallback(() => {\n    const params = new URLSearchParams(location.search);\n    const category = params.get(\"category\");\n    if (category) {\n      fetch(`http://localhost:9090/lighting/api/products/by-category/${encodeURIComponent(category)}`, {\n        headers: { Accept: \"application/json\" },\n      })\n        .then((res) => res.json())\n        .then((data) => setListings(data))\n        .catch(() => setListings([]));\n    } else {\n      setListings([]);\n    }\n  }, [location.search]);\n\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n\n  // --- Fetch cart on mount ---\n  useEffect(() => {\n    async function loadCart() {\n      const data = await fetchCart();\n      setCart(\n        (Array.isArray(data) ? data : []).map((item: any) => ({\n          ...item,\n          id: item.lineId,\n          name: item.productName,\n          qty: item.quantity,\n          price: item.unitPrice,\n        }))\n      );\n    }\n    loadCart();\n  }, []);\n\n  // Search logic\n  const filteredListings = listings.filter((item) =>\n    [item.name, item.description1, item.productTypeHeading, item.orderCode, (!isNaN(Number(item.discountedPrice)) && Number(item.discountedPrice) > 0)\n    ? item.discountedPrice\n    : item.price]\n      .filter(Boolean)\n      .join(\" \")\n      .toLowerCase()\n      .includes(search.toLowerCase())\n  );\n\n  function handleCheckout() {\n    history.push(\"/customer-details\", { cart });\n  }\n\n  const getCartTotal = () => cart.reduce((sum, item) => sum + getDisplayPrice(item) * item.qty, 0);\n\n  return (\n    <div\n      style={{\n        padding: \"24px\",\n        fontFamily: \"'Poppins', 'Inter', Arial, sans-serif\",\n        minHeight: \"100vh\",\n        background: \"#fafbfc\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n      }}\n    >\n      {/* ...rest of your JSX remains unchanged... */}\n    </div>\n  );\n};\n\nexport default ListingPage;\n\nfunction getDisplayPrice(item: any) {\n  const discounted = Number(item.discountedPrice);\n  if (!isNaN(discounted) && discounted > 0) {\n    return discounted;\n  }\n  return Number(item.price);\n}\n\nfunction getResponsiveCardContainerStyle(): React.CSSProperties {\n  const width = window.innerWidth;\n  if (width >= 1200) {\n    return {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(4, 1fr)\",\n      gap: \"32px\",\n      width: \"100%\",\n      maxWidth: 1440,\n      margin: \"0 auto\",\n    };\n  } else if (width >= 900) {\n    return {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(3, 1fr)\",\n      gap: \"28px\",\n      width: \"100%\",\n      maxWidth: 1100,\n      margin: \"0 auto\",\n    };\n  } else if (width >= 600) {\n    return {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(2, 1fr)\",\n      gap: \"20px\",\n      width: \"100%\",\n      maxWidth: 700,\n      margin: \"0 auto\",\n    };\n  } else {\n    return {\n      display: \"flex\",\n      flexDirection: \"column\",\n      gap: \"16px\",\n      width: \"100%\",\n      maxWidth: 400,\n      margin: \"0 auto\",\n    };\n  }\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,UAAU,EAAEC,WAAW,QAAQ,kBAAkB;AAC1D,SAASC,SAAS,QAAmD,2BAA2B;;AAEhG;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEA,MAAMC,WAAqB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAQ,EAAE,CAAC;EAC3C,MAAM,CAACW,cAAc,EAAEC,iBAAiB,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAQ,EAAE,CAAC;EACnD,MAAM,CAACe,MAAM,EAAEC,SAAS,CAAC,GAAGhB,QAAQ,CAAS,EAAE,CAAC;EAEhD,MAAMiB,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAC9B,MAAMe,OAAO,GAAGhB,UAAU,CAAC,CAAC;;EAE5B;EACA,MAAM,CAACiB,eAAe,EAAEC,kBAAkB,CAAC,GAAGpB,QAAQ,CAACqB,+BAA+B,CAAC,CAAC,CAAC;EAEzFtB,SAAS,CAAC,MAAM;IACd,SAASuB,YAAYA,CAAA,EAAG;MACtBF,kBAAkB,CAACC,+BAA+B,CAAC,CAAC,CAAC;IACvD;IACAE,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,CAAC;IAC/C,OAAO,MAAMC,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAEH,YAAY,CAAC;EACjE,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMI,aAAa,GAAGzB,WAAW,CAAC,MAAM;IACtC,MAAM0B,MAAM,GAAG,IAAIC,eAAe,CAACX,QAAQ,CAACF,MAAM,CAAC;IACnD,MAAMc,QAAQ,GAAGF,MAAM,CAACG,GAAG,CAAC,UAAU,CAAC;IACvC,IAAID,QAAQ,EAAE;MACZE,KAAK,CAAC,2DAA2DC,kBAAkB,CAACH,QAAQ,CAAC,EAAE,EAAE;QAC/FI,OAAO,EAAE;UAAEC,MAAM,EAAE;QAAmB;MACxC,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAKxB,WAAW,CAACwB,IAAI,CAAC,CAAC,CACjCC,KAAK,CAAC,MAAMzB,WAAW,CAAC,EAAE,CAAC,CAAC;IACjC,CAAC,MAAM;MACLA,WAAW,CAAC,EAAE,CAAC;IACjB;EACF,CAAC,EAAE,CAACG,QAAQ,CAACF,MAAM,CAAC,CAAC;EAErBhB,SAAS,CAAC,MAAM;IACd2B,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;;EAEnB;EACA3B,SAAS,CAAC,MAAM;IACd,eAAeyC,QAAQA,CAAA,EAAG;MACxB,MAAMF,IAAI,GAAG,MAAMlC,SAAS,CAAC,CAAC;MAC9BM,OAAO,CACL,CAAC+B,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,EAAEK,GAAG,CAAEC,IAAS,KAAM;QACpD,GAAGA,IAAI;QACPC,EAAE,EAAED,IAAI,CAACE,MAAM;QACfC,IAAI,EAAEH,IAAI,CAACI,WAAW;QACtBC,GAAG,EAAEL,IAAI,CAACM,QAAQ;QAClBC,KAAK,EAAEP,IAAI,CAACQ;MACd,CAAC,CAAC,CACJ,CAAC;IACH;IACAZ,QAAQ,CAAC,CAAC;EACZ,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMa,gBAAgB,GAAGxC,QAAQ,CAACyC,MAAM,CAAEV,IAAI,IAC5C,CAACA,IAAI,CAACG,IAAI,EAAEH,IAAI,CAACW,YAAY,EAAEX,IAAI,CAACY,kBAAkB,EAAEZ,IAAI,CAACa,SAAS,EAAG,CAACC,KAAK,CAACC,MAAM,CAACf,IAAI,CAACgB,eAAe,CAAC,CAAC,IAAID,MAAM,CAACf,IAAI,CAACgB,eAAe,CAAC,GAAG,CAAC,GAC/IhB,IAAI,CAACgB,eAAe,GACpBhB,IAAI,CAACO,KAAK,CAAC,CACVG,MAAM,CAACO,OAAO,CAAC,CACfC,IAAI,CAAC,GAAG,CAAC,CACTC,WAAW,CAAC,CAAC,CACbC,QAAQ,CAACjD,MAAM,CAACgD,WAAW,CAAC,CAAC,CAClC,CAAC;EAED,SAASE,cAAcA,CAAA,EAAG;IACxB/C,OAAO,CAACgD,IAAI,CAAC,mBAAmB,EAAE;MAAEzD;IAAK,CAAC,CAAC;EAC7C;EAEA,MAAM0D,YAAY,GAAGA,CAAA,KAAM1D,IAAI,CAAC2D,MAAM,CAAC,CAACC,GAAG,EAAEzB,IAAI,KAAKyB,GAAG,GAAGC,eAAe,CAAC1B,IAAI,CAAC,GAAGA,IAAI,CAACK,GAAG,EAAE,CAAC,CAAC;EAEhG,oBACE3C,OAAA;IACEiE,KAAK,EAAE;MACLC,OAAO,EAAE,MAAM;MACfC,UAAU,EAAE,uCAAuC;MACnDC,SAAS,EAAE,OAAO;MAClBC,UAAU,EAAE,SAAS;MACrBC,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,QAAQ;MACvBC,UAAU,EAAE;IACd;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAGC,CAAC;AAEV,CAAC;AAAC1E,EAAA,CAzFID,WAAqB;EAAA,QAMRJ,WAAW,EACZD,UAAU;AAAA;AAAAiF,EAAA,GAPtB5E,WAAqB;AA2F3B,eAAeA,WAAW;AAE1B,SAAS+D,eAAeA,CAAC1B,IAAS,EAAE;EAClC,MAAMwC,UAAU,GAAGzB,MAAM,CAACf,IAAI,CAACgB,eAAe,CAAC;EAC/C,IAAI,CAACF,KAAK,CAAC0B,UAAU,CAAC,IAAIA,UAAU,GAAG,CAAC,EAAE;IACxC,OAAOA,UAAU;EACnB;EACA,OAAOzB,MAAM,CAACf,IAAI,CAACO,KAAK,CAAC;AAC3B;AAEA,SAAS9B,+BAA+BA,CAAA,EAAwB;EAC9D,MAAMgE,KAAK,GAAG9D,MAAM,CAAC+D,UAAU;EAC/B,IAAID,KAAK,IAAI,IAAI,EAAE;IACjB,OAAO;MACLT,OAAO,EAAE,MAAM;MACfW,mBAAmB,EAAE,gBAAgB;MACrCC,GAAG,EAAE,MAAM;MACXH,KAAK,EAAE,MAAM;MACbI,QAAQ,EAAE,IAAI;MACdC,MAAM,EAAE;IACV,CAAC;EACH,CAAC,MAAM,IAAIL,KAAK,IAAI,GAAG,EAAE;IACvB,OAAO;MACLT,OAAO,EAAE,MAAM;MACfW,mBAAmB,EAAE,gBAAgB;MACrCC,GAAG,EAAE,MAAM;MACXH,KAAK,EAAE,MAAM;MACbI,QAAQ,EAAE,IAAI;MACdC,MAAM,EAAE;IACV,CAAC;EACH,CAAC,MAAM,IAAIL,KAAK,IAAI,GAAG,EAAE;IACvB,OAAO;MACLT,OAAO,EAAE,MAAM;MACfW,mBAAmB,EAAE,gBAAgB;MACrCC,GAAG,EAAE,MAAM;MACXH,KAAK,EAAE,MAAM;MACbI,QAAQ,EAAE,GAAG;MACbC,MAAM,EAAE;IACV,CAAC;EACH,CAAC,MAAM;IACL,OAAO;MACLd,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,QAAQ;MACvBW,GAAG,EAAE,MAAM;MACXH,KAAK,EAAE,MAAM;MACbI,QAAQ,EAAE,GAAG;MACbC,MAAM,EAAE;IACV,CAAC;EACH;AACF;AAAC,IAAAP,EAAA;AAAAQ,YAAA,CAAAR,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}